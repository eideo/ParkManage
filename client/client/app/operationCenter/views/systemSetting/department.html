<div ng-controller="departmentCtrl as vm">
    <div ng-init="dim=true; highlight=true">
        <div class="department-left-box">
            <form role="form">
                <div class="department-search-box">
                    <input type="search" ng-model="pattern" placeholder="请输入关键字搜索">
                    <button class="" type="button"><span class="glyphicon glyphicon-search"></span></button>
                </div>
            </form>
            <script type="text/ng-template" id="deptTree_renderer.html">
                <div ui-tree-handle ng-mouseover="hoverEdit = true" ng-mouseleave="hoverEdit = false">
                    <a data-nodrag ng-click="toggle(this)">
                        <!--<span class="glyphicon" ng-class="{'glyphicon-chevron-right': collapsed, 'glyphicon-chevron-down': !collapsed}"></span>-->
                        <span class="glyphicon glyphicon-play small-text" ng-if="item.items.length>0"></span>
                    </a>
                    <!--{{item.deptname}}-->
          <span ng-bind-html="item.deptname | highlight:pattern | trust" data-nodrag
                ng-click="deptNodeClick(this)"></span>
                    <a class="glyphicon glyphicon-plus-sign pull-right left-10" data-nodrag
                       ng-click="addDeptClick(this)"
                       ng-show="hoverEdit" title="增加部门"></a>
                    <a class="glyphicon glyphicon-pencil pull-right left-10" data-nodrag ng-click="editDeptClick(this)"
                       ng-show="hoverEdit" ng-if="item.pdeptid!=0" title="编辑部门"></a>
                    <a class="glyphicon glyphicon-remove-circle pull-right text-danger" data-nodrag
                       ng-click="removeDeptClick(this)"
                       ng-show="hoverEdit" ng-if="item.pdeptid!=0" title="删除部门"></a>
                </div>
                <ol ui-tree-nodes="options" ng-model="item.items" ng-class="{hidden: collapsed}" data-nodrag
                    data-nodrop-enabled="true">
                    <li ng-repeat="item in item.items" ui-tree-node ng-include="'deptTree_renderer.html'"
                        ng-hide="!treeFilter(item, pattern, supportedFields) && !dim"
                        ng-class="{'filtered-out':!treeFilter(item, pattern, supportedFields) && dim}">
                    </li>
                </ol>
            </script>
            <div id="tree-root" class="department-left-tree no-border" ui-tree="options">
                <ol ui-tree-nodes ng-model="vm.deptTreeData" data-nodrag data-nodrop-enabled="false">
                    <li ng-repeat="item in vm.deptTreeData" ui-tree-node ng-include="'deptTree_renderer.html'"></li>
                </ol>
            </div>
        </div>
    </div>
    <div class="department-right-box search-box1">
        <div class="search-box top-margin">
            <form role="form" class="form-inline">           
                <div>
                    <div class="form-group form-inline">
                        <label for="realname" class="sr-only">姓名：</label>
                        <input type="text" class="form-control width-94 input-inline" id="realname"
                               ng-model='staffList.query.realname' placeholder="姓名">
                    </div>
                    <div class="form-group form-inline">
                        <label for="username" class="sr-only">账号：</label>
                        <input type="text" class="form-control width-94 input-inline" id="username"
                               ng-model='staffList.query.username' placeholder="账号">
                    </div>
                    <div class="form-group form-inline">
                        <label for="phone" class="sr-only">电话：</label>
                        <input type="text" class="form-control width-94 input-inline" id="phone" ng-model='staffList.query.phone'
                               placeholder="手机/电话">
                    </div>
                    <div class="form-group form-inline">
                        <label for="roleid" class="sr-only">岗位</label>
                        <select class="form-control width-94 input-inline" id="roleid" placehodler="岗位"
                                ng-options="role.roleid as role.rolename for role in roleList"
                                ng-model='staffList.query.roleid'
                                ng-change="queryClick()">
                            <option value="">--选择岗位--</option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-sky width-94" style="margin-left:0" ng-click="queryClick()"><span
                            class="glyphicon glyphicon-search"></span>搜索
                    </button>
                    <button type="button" class="btn btn-reset" ng-click="ResetQuery()"><span
                            class="glyphicon glyphicon-repeat margin-4"></span>重置
                    </button>
                </div>
            </form>
        </div>
        <div class="control-box">
                <button type="button" class="btn btn-sky width-94" ng-click="addStaffClick()"><span
                        class="glyphicon glyphicon-plus margin-4">新增</span></button>
                <!--<button type="button" class="btn btn-sky width-94"><span class="glyphicon glyphicon-log-in">导入</button>-->
                <!--<button type="button" class="btn btn-sky width-94"><span class="glyphicon glyphicon-log-out">导出</button>-->
                <button type="button" class="btn btn-sky width-94" ng-click="batchDelStaffClick()"><span
                        class="glyphicon glyphicon-remove margin-4">批量删除</span></button>
        </div>
        <div class="table-responsive-2-1-left2">
            <table class="table table-striped table-hover table-bordered table01">
                <thead>
                <tr>
                    <td><input type="checkbox" ng-model="vm.allSelected" ng-click="selectAllItems()"></td>
                    <td>操作</td>
                    <td>账号</td>
                    <td>姓名</td>
                    <td>性别</td>
                    <td>岗位</td>
                    <td>职位</td>
                    <td>所属部门</td>
                    <td>联系电话</td>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="item in staffList.items">
                    <td>
                        <input type="checkbox" ng-model="item.selected" ng-click="selectItem(item)">
                    </td>
                    <td>
                        <a href="" class="glyphicon glyphicon glyphicon-edit margin-h10" title="编辑"
                           ng-click="editStaffClick(item)"></a>
                        <a href="" class="glyphicon glyphicon-lock margin-h10" title="修改密码"
                           ng-click="restPwdClick(item)"></a>
                        <a href="" class="glyphicon glyphicon-trash margin-h10" title="删除"
                           ng-click="delStaffClick(item.userid)"></a>
                    </td>
                    <td>{{item.username}}</td>
                    <td>{{item.realname}}</td>
                    <td>{{item.sex==0?'男':'女'}}</td>
                    <td>{{item.rolename}}</td>
                    <td>{{item.duties}}</td>
                    <td>{{item.deptname}}</td>
                    <td>{{item.phone}}</td>
                </tr>
                </tbody>
            </table>
        </div>
        <tm-pagination conf="staffList" class="page-fix-left2"></tm-pagination>
    </div>
</div>
</div>
